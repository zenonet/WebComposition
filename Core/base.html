<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WebCompositionApp</title>
    <style>
        .button {
            background: white;
            border-radius: 3pt;
            border-width: 1.2pt;
            padding: 3pt;
        }

        .composable {
            margin: 2pt;
            font-family: "Segoe UI", sans-serif;
        }

        .container {
            gap: 10pt;
        }
    </style>

    <script type="module">

        // Importing compiled ES module.
        import bootsharp, {Program} from "./index.js";

        // Binding 'Program.GetFrontendName' import invoked in C
        Program.log = (msg) => console.log(msg);
        // Subscribing to 'Program.OnMainInvoked'

        Program.applyRecomposition = (html) => document.getElementById("root-container").innerHTML = html;


        // Initializing dotnet runtime and invoking entry point.
        await bootsharp.boot();
        document.getElementById("loadingMsg").style.display = "None";
        document.run = function () {
            Program.setSourcecode(document.getElementById("sourceCode").value);
        }
        document.recompose = function () {
            Program.recompose();
        }
        document.callLambda = function (id){
            Program.callLambda(id);
        }
    </script>
</head>
<body>
<div style="min-height: 25vh; min-width: 50vw" id="root-container">
    {{{Content}}}

</div>
<textarea id="sourceCode" style="min-width: 600px; min-height: 400px">
        {{srcGoesHere}}
</textarea>
<h2 id="loadingMsg">Loading composer...</h2>
<button onclick="document.run()">Run</button>
<button onclick="document.recompose()">Recompose</button>
</body>

</html>